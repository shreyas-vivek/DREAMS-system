{"ast":null,"code":"'use strict';\n\nvar values = require('../sources/values');\n\nvar once = require('../sources/once'); //convert a stream of arrays or streams into just a stream.\n\n\nmodule.exports = function flatten() {\n  return function (read) {\n    var _read;\n\n    return function (abort, cb) {\n      if (abort) {\n        //abort the current stream, and then stream of streams.\n        _read ? _read(abort, function (err) {\n          read(err || abort, cb);\n        }) : read(abort, cb);\n      } else if (_read) nextChunk();else nextStream();\n\n      function nextChunk() {\n        _read(null, function (err, data) {\n          if (err === true) nextStream();else if (err) {\n            read(true, function (abortErr) {\n              // TODO: what do we do with the abortErr?\n              cb(err);\n            });\n          } else cb(null, data);\n        });\n      }\n\n      function nextStream() {\n        _read = null;\n        read(null, function (end, stream) {\n          if (end) return cb(end);\n          if (Array.isArray(stream) || stream && 'object' === typeof stream) stream = values(stream);else if ('function' != typeof stream) stream = once(stream);\n          _read = stream;\n          nextChunk();\n        });\n      }\n    };\n  };\n};","map":{"version":3,"names":["values","require","once","module","exports","flatten","read","_read","abort","cb","err","nextChunk","nextStream","data","abortErr","end","stream","Array","isArray"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/node_modules/pull-stream/throughs/flatten.js"],"sourcesContent":["'use strict'\n\nvar values = require('../sources/values')\nvar once = require('../sources/once')\n\n//convert a stream of arrays or streams into just a stream.\nmodule.exports = function flatten () {\n  return function (read) {\n    var _read\n    return function (abort, cb) {\n      if (abort) { //abort the current stream, and then stream of streams.\n        _read ? _read(abort, function(err) {\n          read(err || abort, cb)\n        }) : read(abort, cb)\n      }\n      else if(_read) nextChunk()\n      else nextStream()\n\n      function nextChunk () {\n        _read(null, function (err, data) {\n          if (err === true) nextStream()\n          else if (err) {\n            read(true, function(abortErr) {\n              // TODO: what do we do with the abortErr?\n              cb(err)\n            })\n          }\n          else cb(null, data)\n        })\n      }\n      function nextStream () {\n        _read = null\n        read(null, function (end, stream) {\n          if(end)\n            return cb(end)\n          if(Array.isArray(stream) || stream && 'object' === typeof stream)\n            stream = values(stream)\n          else if('function' != typeof stream)\n            stream = once(stream)\n          _read = stream\n          nextChunk()\n        })\n      }\n    }\n  }\n}\n\n"],"mappings":"AAAA;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,mBAAD,CAApB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,iBAAD,CAAlB,C,CAEA;;;AACAE,MAAM,CAACC,OAAP,GAAiB,SAASC,OAAT,GAAoB;EACnC,OAAO,UAAUC,IAAV,EAAgB;IACrB,IAAIC,KAAJ;;IACA,OAAO,UAAUC,KAAV,EAAiBC,EAAjB,EAAqB;MAC1B,IAAID,KAAJ,EAAW;QAAE;QACXD,KAAK,GAAGA,KAAK,CAACC,KAAD,EAAQ,UAASE,GAAT,EAAc;UACjCJ,IAAI,CAACI,GAAG,IAAIF,KAAR,EAAeC,EAAf,CAAJ;QACD,CAFY,CAAR,GAEAH,IAAI,CAACE,KAAD,EAAQC,EAAR,CAFT;MAGD,CAJD,MAKK,IAAGF,KAAH,EAAUI,SAAS,GAAnB,KACAC,UAAU;;MAEf,SAASD,SAAT,GAAsB;QACpBJ,KAAK,CAAC,IAAD,EAAO,UAAUG,GAAV,EAAeG,IAAf,EAAqB;UAC/B,IAAIH,GAAG,KAAK,IAAZ,EAAkBE,UAAU,GAA5B,KACK,IAAIF,GAAJ,EAAS;YACZJ,IAAI,CAAC,IAAD,EAAO,UAASQ,QAAT,EAAmB;cAC5B;cACAL,EAAE,CAACC,GAAD,CAAF;YACD,CAHG,CAAJ;UAID,CALI,MAMAD,EAAE,CAAC,IAAD,EAAOI,IAAP,CAAF;QACN,CATI,CAAL;MAUD;;MACD,SAASD,UAAT,GAAuB;QACrBL,KAAK,GAAG,IAAR;QACAD,IAAI,CAAC,IAAD,EAAO,UAAUS,GAAV,EAAeC,MAAf,EAAuB;UAChC,IAAGD,GAAH,EACE,OAAON,EAAE,CAACM,GAAD,CAAT;UACF,IAAGE,KAAK,CAACC,OAAN,CAAcF,MAAd,KAAyBA,MAAM,IAAI,aAAa,OAAOA,MAA1D,EACEA,MAAM,GAAGhB,MAAM,CAACgB,MAAD,CAAf,CADF,KAEK,IAAG,cAAc,OAAOA,MAAxB,EACHA,MAAM,GAAGd,IAAI,CAACc,MAAD,CAAb;UACFT,KAAK,GAAGS,MAAR;UACAL,SAAS;QACV,CATG,CAAJ;MAUD;IACF,CAlCD;EAmCD,CArCD;AAsCD,CAvCD"},"metadata":{},"sourceType":"script"}