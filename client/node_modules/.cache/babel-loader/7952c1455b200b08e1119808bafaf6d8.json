{"ast":null,"code":"'use strict';\n\nconst promisify = require('promisify-es6');\n\nconst multibase = require('multibase');\n\nconst CID = require('cids');\n\nmodule.exports = send => {\n  return promisify((args, opts, callback) => {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n\n    opts = opts || {};\n\n    if (opts.cidBase) {\n      opts['cid-base'] = opts.cidBase;\n      delete opts.cidBase;\n    }\n\n    const transform = (res, callback) => {\n      if (!opts['cid-base']) {\n        return callback(null, res.Path);\n      } // FIXME: remove when go-ipfs supports ?cid-base for /api/v0/resolve\n      // https://github.com/ipfs/go-ipfs/pull/5777#issuecomment-439838555\n\n\n      const parts = res.Path.split('/'); // ['', 'ipfs', 'QmHash', ...]\n\n      if (multibase.isEncoded(parts[2]) !== opts['cid-base']) {\n        try {\n          let cid = new CID(parts[2]);\n\n          if (cid.version === 0 && opts['cid-base'] !== 'base58btc') {\n            cid = cid.toV1();\n          }\n\n          parts[2] = cid.toBaseEncodedString(opts['cid-base']);\n          res.Path = parts.join('/');\n        } catch (err) {\n          return callback(err);\n        }\n      }\n\n      callback(null, res.Path);\n    };\n\n    send.andTransform({\n      path: 'resolve',\n      args: args,\n      qs: opts\n    }, transform, callback);\n  });\n};","map":{"version":3,"names":["promisify","require","multibase","CID","module","exports","send","args","opts","callback","cidBase","transform","res","Path","parts","split","isEncoded","cid","version","toV1","toBaseEncodedString","join","err","andTransform","path","qs"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/node_modules/ipfs-http-client/src/resolve.js"],"sourcesContent":["'use strict'\n\nconst promisify = require('promisify-es6')\nconst multibase = require('multibase')\nconst CID = require('cids')\n\nmodule.exports = (send) => {\n  return promisify((args, opts, callback) => {\n    if (typeof (opts) === 'function') {\n      callback = opts\n      opts = {}\n    }\n\n    opts = opts || {}\n\n    if (opts.cidBase) {\n      opts['cid-base'] = opts.cidBase\n      delete opts.cidBase\n    }\n\n    const transform = (res, callback) => {\n      if (!opts['cid-base']) {\n        return callback(null, res.Path)\n      }\n\n      // FIXME: remove when go-ipfs supports ?cid-base for /api/v0/resolve\n      // https://github.com/ipfs/go-ipfs/pull/5777#issuecomment-439838555\n      const parts = res.Path.split('/') // ['', 'ipfs', 'QmHash', ...]\n\n      if (multibase.isEncoded(parts[2]) !== opts['cid-base']) {\n        try {\n          let cid = new CID(parts[2])\n\n          if (cid.version === 0 && opts['cid-base'] !== 'base58btc') {\n            cid = cid.toV1()\n          }\n\n          parts[2] = cid.toBaseEncodedString(opts['cid-base'])\n          res.Path = parts.join('/')\n        } catch (err) {\n          return callback(err)\n        }\n      }\n\n      callback(null, res.Path)\n    }\n\n    send.andTransform({\n      path: 'resolve',\n      args: args,\n      qs: opts\n    }, transform, callback)\n  })\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,GAAGC,OAAO,CAAC,eAAD,CAAzB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,MAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAkBC,IAAD,IAAU;EACzB,OAAON,SAAS,CAAC,CAACO,IAAD,EAAOC,IAAP,EAAaC,QAAb,KAA0B;IACzC,IAAI,OAAQD,IAAR,KAAkB,UAAtB,EAAkC;MAChCC,QAAQ,GAAGD,IAAX;MACAA,IAAI,GAAG,EAAP;IACD;;IAEDA,IAAI,GAAGA,IAAI,IAAI,EAAf;;IAEA,IAAIA,IAAI,CAACE,OAAT,EAAkB;MAChBF,IAAI,CAAC,UAAD,CAAJ,GAAmBA,IAAI,CAACE,OAAxB;MACA,OAAOF,IAAI,CAACE,OAAZ;IACD;;IAED,MAAMC,SAAS,GAAG,CAACC,GAAD,EAAMH,QAAN,KAAmB;MACnC,IAAI,CAACD,IAAI,CAAC,UAAD,CAAT,EAAuB;QACrB,OAAOC,QAAQ,CAAC,IAAD,EAAOG,GAAG,CAACC,IAAX,CAAf;MACD,CAHkC,CAKnC;MACA;;;MACA,MAAMC,KAAK,GAAGF,GAAG,CAACC,IAAJ,CAASE,KAAT,CAAe,GAAf,CAAd,CAPmC,CAOD;;MAElC,IAAIb,SAAS,CAACc,SAAV,CAAoBF,KAAK,CAAC,CAAD,CAAzB,MAAkCN,IAAI,CAAC,UAAD,CAA1C,EAAwD;QACtD,IAAI;UACF,IAAIS,GAAG,GAAG,IAAId,GAAJ,CAAQW,KAAK,CAAC,CAAD,CAAb,CAAV;;UAEA,IAAIG,GAAG,CAACC,OAAJ,KAAgB,CAAhB,IAAqBV,IAAI,CAAC,UAAD,CAAJ,KAAqB,WAA9C,EAA2D;YACzDS,GAAG,GAAGA,GAAG,CAACE,IAAJ,EAAN;UACD;;UAEDL,KAAK,CAAC,CAAD,CAAL,GAAWG,GAAG,CAACG,mBAAJ,CAAwBZ,IAAI,CAAC,UAAD,CAA5B,CAAX;UACAI,GAAG,CAACC,IAAJ,GAAWC,KAAK,CAACO,IAAN,CAAW,GAAX,CAAX;QACD,CATD,CASE,OAAOC,GAAP,EAAY;UACZ,OAAOb,QAAQ,CAACa,GAAD,CAAf;QACD;MACF;;MAEDb,QAAQ,CAAC,IAAD,EAAOG,GAAG,CAACC,IAAX,CAAR;IACD,CAzBD;;IA2BAP,IAAI,CAACiB,YAAL,CAAkB;MAChBC,IAAI,EAAE,SADU;MAEhBjB,IAAI,EAAEA,IAFU;MAGhBkB,EAAE,EAAEjB;IAHY,CAAlB,EAIGG,SAJH,EAIcF,QAJd;EAKD,CA7Ce,CAAhB;AA8CD,CA/CD"},"metadata":{},"sourceType":"script"}