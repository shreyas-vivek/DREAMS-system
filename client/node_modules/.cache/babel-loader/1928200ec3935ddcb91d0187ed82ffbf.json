{"ast":null,"code":"'use strict';\n\nconst streamToValue = require('./stream-to-value');\n/*\n  Converts a stream to a single JSON value\n*/\n\n\nfunction streamToJsonValue(res, cb) {\n  streamToValue(res, (err, data) => {\n    if (err) {\n      return cb(err);\n    }\n\n    if (!data || data.length === 0) {\n      return cb();\n    } // TODO: check if needed, afaik JSON.parse can parse Buffers\n\n\n    if (Buffer.isBuffer(data)) {\n      data = data.toString();\n    }\n\n    let res;\n\n    try {\n      res = JSON.parse(data);\n    } catch (err) {\n      return cb(new Error(`Invalid JSON: ${data}`));\n    }\n\n    cb(null, res);\n  });\n}\n\nmodule.exports = streamToJsonValue;","map":{"version":3,"names":["streamToValue","require","streamToJsonValue","res","cb","err","data","length","Buffer","isBuffer","toString","JSON","parse","Error","module","exports"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/node_modules/ipfs-http-client/src/utils/stream-to-json-value.js"],"sourcesContent":["'use strict'\n\nconst streamToValue = require('./stream-to-value')\n\n/*\n  Converts a stream to a single JSON value\n*/\nfunction streamToJsonValue (res, cb) {\n  streamToValue(res, (err, data) => {\n    if (err) {\n      return cb(err)\n    }\n\n    if (!data || data.length === 0) {\n      return cb()\n    }\n\n    // TODO: check if needed, afaik JSON.parse can parse Buffers\n    if (Buffer.isBuffer(data)) {\n      data = data.toString()\n    }\n\n    let res\n    try {\n      res = JSON.parse(data)\n    } catch (err) {\n      return cb(new Error(`Invalid JSON: ${data}`))\n    }\n\n    cb(null, res)\n  })\n}\n\nmodule.exports = streamToJsonValue\n"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,mBAAD,CAA7B;AAEA;AACA;AACA;;;AACA,SAASC,iBAAT,CAA4BC,GAA5B,EAAiCC,EAAjC,EAAqC;EACnCJ,aAAa,CAACG,GAAD,EAAM,CAACE,GAAD,EAAMC,IAAN,KAAe;IAChC,IAAID,GAAJ,EAAS;MACP,OAAOD,EAAE,CAACC,GAAD,CAAT;IACD;;IAED,IAAI,CAACC,IAAD,IAASA,IAAI,CAACC,MAAL,KAAgB,CAA7B,EAAgC;MAC9B,OAAOH,EAAE,EAAT;IACD,CAP+B,CAShC;;;IACA,IAAII,MAAM,CAACC,QAAP,CAAgBH,IAAhB,CAAJ,EAA2B;MACzBA,IAAI,GAAGA,IAAI,CAACI,QAAL,EAAP;IACD;;IAED,IAAIP,GAAJ;;IACA,IAAI;MACFA,GAAG,GAAGQ,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAN;IACD,CAFD,CAEE,OAAOD,GAAP,EAAY;MACZ,OAAOD,EAAE,CAAC,IAAIS,KAAJ,CAAW,iBAAgBP,IAAK,EAAhC,CAAD,CAAT;IACD;;IAEDF,EAAE,CAAC,IAAD,EAAOD,GAAP,CAAF;EACD,CAtBY,CAAb;AAuBD;;AAEDW,MAAM,CAACC,OAAP,GAAiBb,iBAAjB"},"metadata":{},"sourceType":"script"}