{"ast":null,"code":"'use strict';\n\nconst {\n  Duplex\n} = require('readable-stream');\n\nclass PullDuplexStream extends Duplex {\n  constructor(source, sink, options) {\n    super(options);\n    this.source = source;\n    this.drainingSource = false;\n    this.sink = sink;\n    this.input = [];\n    this.writeCallbacks = [];\n    this.internalSourceCallbacks = [];\n\n    if (this.sink) {\n      this.sink(this._internalSource.bind(this));\n    }\n  }\n\n  drainPull() {\n    const self = this;\n    this.drainingSource = true;\n    this.source(null, function next(end, data) {\n      if (end instanceof Error) {\n        return self.emit('error', end);\n      }\n\n      if (end) {\n        return self.push(null);\n      }\n\n      if (self.push(data)) {\n        self.source(null, next);\n      } else {\n        self.drainingSource = false;\n      }\n    });\n  }\n\n  _read() {\n    if (this.source && !this.drainingSource) {\n      this.drainPull();\n    }\n  }\n\n  _write(chunk, encoding, callback) {\n    if (this.internalSourceCallbacks.length > 0) {\n      this.internalSourceCallbacks.shift()(null, chunk);\n      callback();\n    } else {\n      this.input.push(chunk);\n      this.writeCallbacks.push(callback);\n    }\n  }\n\n  _internalSource(end, cb) {\n    if (end) {\n      if (this.writeCallbacks.length > 0) {\n        // call write callback with error\n        this.writeCallbacks.shift()(end instanceof Error ? end : new Error('Aborted'));\n      }\n\n      return cb(end);\n    }\n\n    if (this.input.length > 0) {\n      cb(null, this.input.shift());\n      this.writeCallbacks.shift()();\n    } else {\n      this.internalSourceCallbacks.push(cb);\n    }\n  }\n\n  _final(callback) {\n    // end the internal source\n    if (this.internalSourceCallbacks.length > 0) {\n      this.internalSourceCallbacks.shift()(true);\n    }\n\n    callback();\n  }\n\n  _destroy(err, cb) {\n    // abort the source\n    if (!this._readableState.ended && this.source) {\n      this.source(true, () => {// do nothing\n      });\n    } // propagate error to sink\n\n\n    if (this.internalSourceCallbacks.length > 0) {\n      this.internalSourceCallbacks.shift()(err);\n    }\n\n    cb(err);\n  }\n\n}\n\nfunction wrapper(source, sink, options) {\n  if (source && typeof source === 'object') {\n    source = source.source;\n    sink = source.sink;\n  }\n\n  return new PullDuplexStream(source, sink, Object.assign({\n    readableObjectMode: true,\n    writableObjectMode: true\n  }, options));\n}\n\nmodule.exports = {\n  duplex: wrapper,\n  readable: (source, options) => wrapper(source, null, options),\n  writeable: (sink, options) => wrapper(null, sink, options)\n};","map":{"version":3,"names":["Duplex","require","PullDuplexStream","constructor","source","sink","options","drainingSource","input","writeCallbacks","internalSourceCallbacks","_internalSource","bind","drainPull","self","next","end","data","Error","emit","push","_read","_write","chunk","encoding","callback","length","shift","cb","_final","_destroy","err","_readableState","ended","wrapper","Object","assign","readableObjectMode","writableObjectMode","module","exports","duplex","readable","writeable"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/node_modules/pull-to-stream/index.js"],"sourcesContent":["'use strict';\n\nconst { Duplex } = require('readable-stream');\n\nclass PullDuplexStream extends Duplex {\n    constructor(source, sink, options) {\n        super(options);\n        this.source = source;\n        this.drainingSource = false;\n        this.sink = sink;\n        this.input = [];\n        this.writeCallbacks = [];\n        this.internalSourceCallbacks = [];\n        if (this.sink) {\n            this.sink(this._internalSource.bind(this));\n        }\n    }\n\n    drainPull() {\n        const self = this;\n\n        this.drainingSource = true;\n        this.source(null, function next(end, data) {\n            if (end instanceof Error) {\n                return self.emit('error', end);\n            }\n\n            if (end) {\n                return self.push(null);\n            }\n\n            if (self.push(data)) {\n                self.source(null, next);\n            } else {\n                self.drainingSource = false;\n            }\n        });\n    }\n\n    _read() {\n        if (this.source && !this.drainingSource) {\n            this.drainPull();\n        }\n    }\n\n    _write(chunk, encoding, callback) {\n        if (this.internalSourceCallbacks.length > 0) {\n            this.internalSourceCallbacks.shift()(null, chunk);\n            callback();\n        } else {\n            this.input.push(chunk);\n            this.writeCallbacks.push(callback);\n        }\n    }\n\n    _internalSource(end, cb) {\n        if (end) {\n            if (this.writeCallbacks.length > 0) {\n                // call write callback with error\n                this.writeCallbacks.shift()(\n                    end instanceof Error ? end : new Error('Aborted')\n                );\n            }\n\n            return cb(end);\n        }\n\n        if (this.input.length > 0) {\n            cb(null, this.input.shift());\n            this.writeCallbacks.shift()();\n        } else {\n            this.internalSourceCallbacks.push(cb);\n        }\n    }\n\n    _final(callback) {\n        // end the internal source\n        if (this.internalSourceCallbacks.length > 0) {\n            this.internalSourceCallbacks.shift()(true);\n        }\n        callback();\n    }\n    _destroy(err, cb) {\n        // abort the source\n        if (!this._readableState.ended && this.source) {\n            this.source(true, () => {\n                // do nothing\n            });\n        }\n\n        // propagate error to sink\n        if (this.internalSourceCallbacks.length > 0) {\n            this.internalSourceCallbacks.shift()(err);\n        }\n\n        cb(err);\n    }\n}\n\nfunction wrapper(source, sink, options) {\n    if (source && typeof source === 'object') {\n        source = source.source;\n        sink = source.sink;\n    }\n\n    return new PullDuplexStream(\n        source,\n        sink,\n        Object.assign(\n            {\n                readableObjectMode: true,\n                writableObjectMode: true\n            },\n            options\n        )\n    );\n}\n\nmodule.exports = {\n    duplex: wrapper,\n    readable: (source, options) => wrapper(source, null, options),\n    writeable: (sink, options) => wrapper(null, sink, options)\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}