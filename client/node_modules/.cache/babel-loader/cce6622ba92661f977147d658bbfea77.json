{"ast":null,"code":"'use strict';\n\nconst {\n  Transform,\n  PassThrough\n} = require('readable-stream');\n\nconst pump = require('pump');\n\nconst ndjson = require('ndjson');\n\nconst isStream = require('is-stream');\n\nconst toEntry = entry => {\n  return {\n    name: entry.Name,\n    type: entry.Type,\n    size: entry.Size,\n    hash: entry.Hash\n  };\n};\n\nmodule.exports = send => {\n  return (args, opts) => {\n    opts = opts || {};\n    const transform = new Transform({\n      objectMode: true,\n\n      transform(entry, encoding, callback) {\n        callback(null, toEntry(entry));\n      }\n\n    });\n    const output = new PassThrough({\n      objectMode: true\n    });\n    send({\n      path: 'files/ls',\n      args: args,\n      qs: Object.assign({}, opts, {\n        stream: true\n      })\n    }, (err, res) => {\n      if (err) {\n        return output.destroy(err);\n      }\n\n      if (isStream(res)) {\n        const parse = ndjson.parse();\n        pump(res, parse, transform, output);\n      } else {\n        const entries = res.Entries || [];\n        entries.forEach(entry => {\n          output.write(toEntry(entry));\n        });\n        output.end();\n      }\n    });\n    return output;\n  };\n};","map":{"version":3,"names":["Transform","PassThrough","require","pump","ndjson","isStream","toEntry","entry","name","Name","type","Type","size","Size","hash","Hash","module","exports","send","args","opts","transform","objectMode","encoding","callback","output","path","qs","Object","assign","stream","err","res","destroy","parse","entries","Entries","forEach","write","end"],"sources":["C:/Users/Shreyas/Desktop/DMR-master/client/node_modules/ipfs-http-client/src/files-mfs/ls-readable-stream.js"],"sourcesContent":["'use strict'\n\nconst {\n  Transform,\n  PassThrough\n} = require('readable-stream')\nconst pump = require('pump')\nconst ndjson = require('ndjson')\nconst isStream = require('is-stream')\n\nconst toEntry = (entry) => {\n  return {\n    name: entry.Name,\n    type: entry.Type,\n    size: entry.Size,\n    hash: entry.Hash\n  }\n}\n\nmodule.exports = (send) => {\n  return (args, opts) => {\n    opts = opts || {}\n\n    const transform = new Transform({\n      objectMode: true,\n\n      transform (entry, encoding, callback) {\n        callback(null, toEntry(entry))\n      }\n    })\n\n    const output = new PassThrough({\n      objectMode: true\n    })\n\n    send({\n      path: 'files/ls',\n      args: args,\n      qs: Object.assign({}, opts, { stream: true })\n    }, (err, res) => {\n      if (err) {\n        return output.destroy(err)\n      }\n\n      if (isStream(res)) {\n        const parse = ndjson.parse()\n\n        pump(res, parse, transform, output)\n      } else {\n        const entries = res.Entries || []\n\n        entries.forEach((entry) => {\n          output.write(toEntry(entry))\n        })\n\n        output.end()\n      }\n    })\n\n    return output\n  }\n}\n"],"mappings":"AAAA;;AAEA,MAAM;EACJA,SADI;EAEJC;AAFI,IAGFC,OAAO,CAAC,iBAAD,CAHX;;AAIA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMG,QAAQ,GAAGH,OAAO,CAAC,WAAD,CAAxB;;AAEA,MAAMI,OAAO,GAAIC,KAAD,IAAW;EACzB,OAAO;IACLC,IAAI,EAAED,KAAK,CAACE,IADP;IAELC,IAAI,EAAEH,KAAK,CAACI,IAFP;IAGLC,IAAI,EAAEL,KAAK,CAACM,IAHP;IAILC,IAAI,EAAEP,KAAK,CAACQ;EAJP,CAAP;AAMD,CAPD;;AASAC,MAAM,CAACC,OAAP,GAAkBC,IAAD,IAAU;EACzB,OAAO,CAACC,IAAD,EAAOC,IAAP,KAAgB;IACrBA,IAAI,GAAGA,IAAI,IAAI,EAAf;IAEA,MAAMC,SAAS,GAAG,IAAIrB,SAAJ,CAAc;MAC9BsB,UAAU,EAAE,IADkB;;MAG9BD,SAAS,CAAEd,KAAF,EAASgB,QAAT,EAAmBC,QAAnB,EAA6B;QACpCA,QAAQ,CAAC,IAAD,EAAOlB,OAAO,CAACC,KAAD,CAAd,CAAR;MACD;;IAL6B,CAAd,CAAlB;IAQA,MAAMkB,MAAM,GAAG,IAAIxB,WAAJ,CAAgB;MAC7BqB,UAAU,EAAE;IADiB,CAAhB,CAAf;IAIAJ,IAAI,CAAC;MACHQ,IAAI,EAAE,UADH;MAEHP,IAAI,EAAEA,IAFH;MAGHQ,EAAE,EAAEC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,IAAlB,EAAwB;QAAEU,MAAM,EAAE;MAAV,CAAxB;IAHD,CAAD,EAID,CAACC,GAAD,EAAMC,GAAN,KAAc;MACf,IAAID,GAAJ,EAAS;QACP,OAAON,MAAM,CAACQ,OAAP,CAAeF,GAAf,CAAP;MACD;;MAED,IAAI1B,QAAQ,CAAC2B,GAAD,CAAZ,EAAmB;QACjB,MAAME,KAAK,GAAG9B,MAAM,CAAC8B,KAAP,EAAd;QAEA/B,IAAI,CAAC6B,GAAD,EAAME,KAAN,EAAab,SAAb,EAAwBI,MAAxB,CAAJ;MACD,CAJD,MAIO;QACL,MAAMU,OAAO,GAAGH,GAAG,CAACI,OAAJ,IAAe,EAA/B;QAEAD,OAAO,CAACE,OAAR,CAAiB9B,KAAD,IAAW;UACzBkB,MAAM,CAACa,KAAP,CAAahC,OAAO,CAACC,KAAD,CAApB;QACD,CAFD;QAIAkB,MAAM,CAACc,GAAP;MACD;IACF,CAtBG,CAAJ;IAwBA,OAAOd,MAAP;EACD,CAxCD;AAyCD,CA1CD"},"metadata":{},"sourceType":"script"}