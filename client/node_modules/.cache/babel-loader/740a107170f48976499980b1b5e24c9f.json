{"ast":null,"code":"'use strict';\n\nmodule.exports = function drain(op, done) {\n  var read, abort;\n\n  function sink(_read) {\n    read = _read;\n    if (abort) return sink.abort() //this function is much simpler to write if you\n    //just use recursion, but by using a while loop\n    //we do not blow the stack if the stream happens to be sync.\n    ;\n\n    (function next() {\n      var loop = true,\n          cbed = false;\n\n      while (loop) {\n        cbed = false;\n        read(null, function (end, data) {\n          cbed = true;\n\n          if (end = end || abort) {\n            loop = false;\n            if (done) done(end === true ? null : end);else if (end && end !== true) throw end;\n          } else if (op && false === op(data) || abort) {\n            loop = false;\n            read(abort || true, done || function () {});\n          } else if (!loop) {\n            next();\n          }\n        });\n\n        if (!cbed) {\n          loop = false;\n          return;\n        }\n      }\n    })();\n  }\n\n  sink.abort = function (err, cb) {\n    if ('function' == typeof err) cb = err, err = true;\n    abort = err || true;\n    if (read) return read(abort, cb || function () {});\n  };\n\n  return sink;\n};","map":{"version":3,"names":["module","exports","drain","op","done","read","abort","sink","_read","next","loop","cbed","end","data","err","cb"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/node_modules/pull-stream/sinks/drain.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function drain (op, done) {\n  var read, abort\n\n  function sink (_read) {\n    read = _read\n    if(abort) return sink.abort()\n    //this function is much simpler to write if you\n    //just use recursion, but by using a while loop\n    //we do not blow the stack if the stream happens to be sync.\n    ;(function next() {\n        var loop = true, cbed = false\n        while(loop) {\n          cbed = false\n          read(null, function (end, data) {\n            cbed = true\n            if(end = end || abort) {\n              loop = false\n              if(done) done(end === true ? null : end)\n              else if(end && end !== true)\n                throw end\n            }\n            else if(op && false === op(data) || abort) {\n              loop = false\n              read(abort || true, done || function () {})\n            }\n            else if(!loop){\n              next()\n            }\n          })\n          if(!cbed) {\n            loop = false\n            return\n          }\n        }\n      })()\n  }\n\n  sink.abort = function (err, cb) {\n    if('function' == typeof err)\n      cb = err, err = true\n    abort = err || true\n    if(read) return read(abort, cb || function () {})\n  }\n\n  return sink\n}\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,KAAT,CAAgBC,EAAhB,EAAoBC,IAApB,EAA0B;EACzC,IAAIC,IAAJ,EAAUC,KAAV;;EAEA,SAASC,IAAT,CAAeC,KAAf,EAAsB;IACpBH,IAAI,GAAGG,KAAP;IACA,IAAGF,KAAH,EAAU,OAAOC,IAAI,CAACD,KAAL,EAAP,CACV;IACA;IACA;IAHU;;IAIT,CAAC,SAASG,IAAT,GAAgB;MACd,IAAIC,IAAI,GAAG,IAAX;MAAA,IAAiBC,IAAI,GAAG,KAAxB;;MACA,OAAMD,IAAN,EAAY;QACVC,IAAI,GAAG,KAAP;QACAN,IAAI,CAAC,IAAD,EAAO,UAAUO,GAAV,EAAeC,IAAf,EAAqB;UAC9BF,IAAI,GAAG,IAAP;;UACA,IAAGC,GAAG,GAAGA,GAAG,IAAIN,KAAhB,EAAuB;YACrBI,IAAI,GAAG,KAAP;YACA,IAAGN,IAAH,EAASA,IAAI,CAACQ,GAAG,KAAK,IAAR,GAAe,IAAf,GAAsBA,GAAvB,CAAJ,CAAT,KACK,IAAGA,GAAG,IAAIA,GAAG,KAAK,IAAlB,EACH,MAAMA,GAAN;UACH,CALD,MAMK,IAAGT,EAAE,IAAI,UAAUA,EAAE,CAACU,IAAD,CAAlB,IAA4BP,KAA/B,EAAsC;YACzCI,IAAI,GAAG,KAAP;YACAL,IAAI,CAACC,KAAK,IAAI,IAAV,EAAgBF,IAAI,IAAI,YAAY,CAAE,CAAtC,CAAJ;UACD,CAHI,MAIA,IAAG,CAACM,IAAJ,EAAS;YACZD,IAAI;UACL;QACF,CAfG,CAAJ;;QAgBA,IAAG,CAACE,IAAJ,EAAU;UACRD,IAAI,GAAG,KAAP;UACA;QACD;MACF;IACF,CAzBF;EA0BF;;EAEDH,IAAI,CAACD,KAAL,GAAa,UAAUQ,GAAV,EAAeC,EAAf,EAAmB;IAC9B,IAAG,cAAc,OAAOD,GAAxB,EACEC,EAAE,GAAGD,GAAL,EAAUA,GAAG,GAAG,IAAhB;IACFR,KAAK,GAAGQ,GAAG,IAAI,IAAf;IACA,IAAGT,IAAH,EAAS,OAAOA,IAAI,CAACC,KAAD,EAAQS,EAAE,IAAI,YAAY,CAAE,CAA5B,CAAX;EACV,CALD;;EAOA,OAAOR,IAAP;AACD,CA7CD"},"metadata":{},"sourceType":"script"}