{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shreyas\\\\Desktop\\\\DREAMS\\\\DMR-master\\\\DREAMS-system\\\\client\\\\src\\\\pages\\\\patient\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Backdrop, CircularProgress } from '@mui/material';\nimport useEth from '../../contexts/EthContext/useEth';\nimport Record from '../../components/Record';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Patient = () => {\n  _s();\n\n  const {\n    state: {\n      contract,\n      accounts,\n      role,\n      loading\n    }\n  } = useEth();\n  const [records, setRecords] = useState([]);\n  const [loadingRecords, setLoadingRecords] = useState(true);\n  useEffect(() => {\n    const getRecords = async () => {\n      try {\n        const records = await contract.methods.getRecords(accounts[0]).call({\n          from: accounts[0]\n        });\n        setRecords(records);\n        setLoadingRecords(false);\n      } catch (err) {\n        console.error(err);\n        setLoadingRecords(false);\n      }\n    };\n\n    getRecords();\n  });\n\n  if (loading || loadingRecords) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      sx: {\n        color: '#fff',\n        zIndex: theme => theme.zIndex.drawer + 1\n      },\n      open: loading,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"inherit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      width: \"100vw\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        width: \"60%\",\n        my: 5,\n        children: [/*#__PURE__*/_jsxDEV(Backdrop, {\n          sx: {\n            color: '#fff',\n            zIndex: theme => theme.zIndex.drawer + 1\n          },\n          open: loading,\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n            color: \"inherit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), !accounts ? /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          justifyContent: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"Open your MetaMask wallet to get connected, then refresh this page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [role === 'unknown' && /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            justifyContent: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              children: \"You're not registered, please go to home page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), role === 'doctor' && /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            justifyContent: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              children: \"Only patient can access this page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), role === 'patient' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h4\",\n              children: \"My Records\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 19\n            }, this), records.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              my: 5,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"No records found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 21\n            }, this), records.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              flexDirection: \"column\",\n              mt: 3,\n              mb: -2,\n              children: records.map((record, index) => /*#__PURE__*/_jsxDEV(Box, {\n                mb: 2,\n                children: /*#__PURE__*/_jsxDEV(Record, {\n                  record: record\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(Patient, \"+JyWmw3+zsKozyjL5e4C4KRlo6U=\", false, function () {\n  return [useEth];\n});\n\n_c = Patient;\nexport default Patient;\n\nvar _c;\n\n$RefreshReg$(_c, \"Patient\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Backdrop","CircularProgress","useEth","Record","Patient","state","contract","accounts","role","loading","records","setRecords","loadingRecords","setLoadingRecords","getRecords","methods","call","from","err","console","error","color","zIndex","theme","drawer","length","map","record","index"],"sources":["C:/Users/Shreyas/Desktop/DREAMS/DMR-master/DREAMS-system/client/src/pages/patient/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Box, Typography, Backdrop, CircularProgress } from '@mui/material'\nimport useEth from '../../contexts/EthContext/useEth'\nimport Record from '../../components/Record'\n\nconst Patient = () => {\n  const {\n    state: { contract, accounts, role, loading },\n  } = useEth()\n\n  const [records, setRecords] = useState([])\n  const [loadingRecords, setLoadingRecords] = useState(true)\n\n  useEffect(() => {\n    const getRecords = async () => {\n      try {\n        const records = await contract.methods.getRecords(accounts[0]).call({ from: accounts[0] })\n        setRecords(records)\n        setLoadingRecords(false)\n      } catch (err) {\n        console.error(err)\n        setLoadingRecords(false)\n      }\n    }\n    getRecords()\n  })\n\n  if (loading || loadingRecords) {\n    return (\n      <Backdrop sx={{ color: '#fff', zIndex: theme => theme.zIndex.drawer + 1 }} open={loading}>\n        <CircularProgress color='inherit' />\n      </Backdrop>\n    )\n  } else {\n    return (\n      <Box display='flex' justifyContent='center' width='100vw'>\n        <Box width='60%' my={5}>\n          <Backdrop sx={{ color: '#fff', zIndex: theme => theme.zIndex.drawer + 1 }} open={loading}>\n            <CircularProgress color='inherit' />\n          </Backdrop>\n          {!accounts ? (\n            <Box display='flex' justifyContent='center'>\n              <Typography variant='h6'>Open your MetaMask wallet to get connected, then refresh this page</Typography>\n            </Box>\n          ) : (\n            <>\n              {role === 'unknown' && (\n                <Box display='flex' justifyContent='center'>\n                  <Typography variant='h5'>You're not registered, please go to home page</Typography>\n                </Box>\n              )}\n              {role === 'doctor' && (\n                <Box display='flex' justifyContent='center'>\n                  <Typography variant='h5'>Only patient can access this page</Typography>\n                </Box>\n              )}\n              {role === 'patient' && (\n                <>\n                  <Typography variant='h4'>My Records</Typography>\n\n                  {records.length === 0 && (\n                    <Box display='flex' alignItems='center' justifyContent='center' my={5}>\n                      <Typography variant='h5'>No records found</Typography>\n                    </Box>\n                  )}\n\n                  {records.length > 0 && (\n                    <Box display='flex' flexDirection='column' mt={3} mb={-2}>\n                      {records.map((record, index) => (\n                        <Box mb={2}>\n                          <Record key={index} record={record} />\n                        </Box>\n                      ))}\n                    </Box>\n                  )}\n                </>\n              )}\n            </>\n          )}\n        </Box>\n      </Box>\n    )\n  }\n}\n\nexport default Patient\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}